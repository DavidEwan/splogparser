using Impl;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.IO;
using System.Text;

namespace ImplTests
{
   /// <summary>
   /// Test different end-of-line scenarios when reading an nwlog file. 
   /// End-of-line is a misnomer; it's really end of information-block. 
   /// So the start could be 'lpResult =' and 30 log lines later end with '}'
   /// 
   /// Note: make sure you start the string on a new-line so you dont accidentally add a \r\n to the test. 
   /// 
   /// </summary>
   [TestClass]
   public class TraceFileReaderTests
   {
      [TestMethod]
      public void DetectEOLTailIsWellFormed()
      {
         // Test Sample Line
         string sampleFile = 
            @"			ulDispensedCount	0		0		43		219		194		846		
			ulPresentedCount	0		0		43		219		194		846		
			ulRetractedCount	0		0		0		0		0		0		
		}
	}
}16144294967295015900087402540003CDM0009FRAMEWORK00102023/01/24001200:59 14.7200011INFORMATION0028CBaseService::BroadcastEvent0048hApp=0x0F0726FA, pCursor->pData->hApp=0x0E48C40201594294967295012300087402550006COMMON0003SPI00102023/01/24001200:59 14.7200011INFORMATION0010WFPGetInfo0033HSERVICE=2, SrvcVersion=2563(A03)01234294967295016600087402560006COMMON0009FRAMEWORK00102023/01/24001200:59 14.7200011INFORMATION0028CServiceProvider::GetService0052service OK {HSERVICE[2], LogicalName[CashDispenser]}01664294967295012600087402570003CDM0003SPI00102023/01/24001200:59 14.7200011INFORMATION0026CServiceAgent::ReportEvent0023call UnPack(0x0AB27600)01264294967295015900087402580003CDM0007ACTIVEX00102023/01/24001200:59 14.7200011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000407, wParam=0x080B2D68, lParam=0x0C60CF7401594294967295013700087402590003CDM0009FRAMEWORK00102023/01/24001200:59 14.7200011INFORMATION0028CBaseService::BroadcastEvent0026pData->wClass=13, wClass=301374294967295024200087402600003CDM0003SPI00102023/01/24001200:59 14.7210007XFS_CMD0012GETINFO[303]0157hResult[0] = WFPGetInfo(
	hService = [2],
	dwCategory = [303],
	dwTimeOut = [300000],
	hWnd = [0x0002019c],
	ReqID = [17624],
	lpQueryDetails = NULL
)02424294967295016700087402610003CDM0009FRAMEWORK00102023/01/24001200:59 14.7210011INFORMATION0021CBaseService::GetInfo0063Srvc=301 ReqID=17620 Wnd=0x0002019C Cmd=301 TimeOut=300000 ";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("}\r\n}"));
      }

      [TestMethod]
      public void DetectEOLTailIsMalformed()
      {
         // Test Sample Line
         string sampleFile =
            @"		}
			ulDispensedCount = [194],
			ulPresentedCount = [194],
			ulRetractedCount = [0]
		}
}10324294967295016800087402630003CDM0007ACTIVEX00102023/01/24001200:59 14.7210011INFORMATION0031CCdmService::HandleCashUnitInfo0056GetInfo-Result[CashUnitInfo][ReqID=17621] = {hResult[0]}01684294967295015900087402640003CDM0009FRAMEWORK00102023/01/24001200:59 14.7210011INFORMATION0028CBaseService::BroadcastEvent0048hApp=0x0E48C402, pCursor->pData->hApp=0x0E48C40201594294967295019500087402650003CDM0007ACTIVEX00102023/01/24001200:59 14.7210006XFSAPI0022CService::AsyncGetInfo0097WFSAsyncGetInfo(hService=2, dwCategory=303, lpQueryDetails=0x00000000, RequestID=17624) hResult=001954294967295015700087402660013CashDispenser0009FRAMEWORK00102023/01/24001200:59 ";
         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("}\r\n}"));
      }

      [TestMethod]
      public void DetectEOLLogLineIsDmp()
      {
         // Test Sample Line
         string sampleFile = 
            @"0010h: 27 14 8C B1 6A 9E F7 64 3B 77 55 F5 70 29 97 F7 
0020h: D6 A1 35 09 18 3B 09 9B 5B 88 42 36 C4 98 7E E9 
0030h: 87 C3 C1 D7 BD 5A F3 95 5D D4 C6 53 A2 2E 6A BF ";
         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("F7 \r\n"));
      }

      [TestMethod]
      public void DetectlpResultAndContinue()
      {
         // Detect we have an lpResult on the next line and continue to the '}'
         string sampleFile = 
            @"39.7930011INFORMATION0028CServiceProvider::GetService0046service OK {HSERVICE[8], LogicalName[Sensors]}01604294967295015000087431700007Sensors0009FRAMEWORK00102023/01/24001203:00 39.7930007DEVCALL0021CBaseService::Execute0046HSERVICE[8] COMMAND[801] IN BUFFER[0x004E5E34]01504294967295014100087431710003SIU0009FRAMEWORK00102023/01/24001203:00 39.7930011INFORMATION0032CSiuService::ExecuteEnableEvents0026Enable or disable siu port01414294967295015500087431720003SIU0009FRAMEWORK00102023/01/24001203:00 39.7930011INFORMATION0020CSiuService::Execute0052Process Execute command {Command Code[801]} Success!01554294967295016200087431730007Sensors0009FRAMEWORK00102023/01/24001203:00 39.7930007DEVRETN0021CBaseService::Execute0058HSERVICE[8] COMMAND[801] HRESULT[0] OUT BUFFER[0x00000000]01624294967295012200087431740006COMMON0009FRAMEWORK00102023/01/24001203:00 39.7930011INFORMATION0015CProcessor::Run0021---- Wait [1108] ----01224294967295029900087431750006SENSOR0003SPI00102023/01/24001203:00 39.7930009XFS_EVENT0012EXECUTE[801]0209WFS_EXECUTE_COMPLETE, 
lpResult =
{
	hWnd = [0x0001040c],
	RequestID = [17762],
	hService = [8],
	tsTimestamp = [2023/01/24 03:00 39.793],
	hResult = [0],
	u.dwCommandCode = [801],
	lpBuffer = NULL
}02994294967295020100087431760006SENSOR0007ACTIVEX00102023/01/24001203:00 39.7940006XFSAPI0023CContextMgr::MgrWndProc0099WFS_EXECUTE_COMPLETE(RequestID=17762, hService=8, hResult=0, dwCommandCode=801 lpBuffer=0x00000000)02014294967295016200087431770006SENSOR0007ACTIVEX00102023/01/24001203:00 39.7940011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000408, wParam=0x00000000, lParam=0x24EE1E6401624294967295011900087431780006COMMON0003SPI00102023/01/24001203:00 39.7940011INFORMATION0010WFPGetInfo0029HSERVICE=8, SrvcVersion=3(03)01194294967295023700087431790003SIU0003SPI00102023/01/24001203:00 39.7950007XFS_CMD0012GETINFO[801]0152hResult[0] = WFPGetInfo(";
         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("\r\n}"));
         Assert.IsTrue(logLine.Contains("lpResult"));
      }

      [TestMethod]
      public void DetectEOLOutputIsTable()
      {
         // Test Sample Line - some log lines are in table form. This should read all the way down to
         // include the NoteNumbers: line 
         string sampleFile =
            @"03314294967295013600698183080003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS016 changed(1->0)01364294967295013600698183090003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS757 changed(1->0)01364294967295013600698183100003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS758 changed(1->0)01364294967295013600698183110003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS650 changed(1->0)01364294967295013600698183120003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS661 changed(0->1)01364294967295013600698183130003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS665 changed(1->0)01364294967295013600698183140003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GSA06 changed(1->0)01364294967295013600698183150003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS208 changed(1->0)01364294967295013600698183160003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS214 changed(1->0)01364294967295013600698183170003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS308 changed(1->0)01364294967295013600698183180003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS314 changed(1->0)01364294967295013600698183190003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS407 changed(1->0)01364294967295013600698183200003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS408 changed(1->0)01364294967295013600698183210003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0021CBRM5XCommand::Sensor0039oldSensorInfo.BRM5X.GS414 changed(1->0)01364294967295024200698183220003BRM0002SP00102022/12/07001220:36 11.9320011INFORMATION0023CBrmCommand::UpdateData0143bUpdateDPC=[1], bNoUpdateRetractCnt=[0], bDispense=[0], bForceUpdate=[0], bSet=[0], bLogDisplay=[1], bIgnoreRTOperCount[0], bInopWhenRCError[0]02424294967295013000698183230003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0024CBrmCommand::DumpBITInfo0030MediaInfo : [0000000000000000]01304294967295012800698183240003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0024CBrmCommand::DumpBITInfo0028JamInfo : [0000000000000000]01284294967295014500698183250003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0024CBrmCommand::DumpBITInfo0045JamInfo1 : [00000000000000000000000000000000]01454294967295014500698183260003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0024CBrmCommand::DumpBITInfo0045JamInfo2 : [00000000000000000000000111111000]01454294967295014900698183270003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0024CBrmCommand::DumpBITInfo0049ActionResult : [00000000000000000000000000000000]01494294967295019000698183280003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0091SC: wCSMcount=0, wTSKcount=0, wRcCount=[0][0][0][0][0][0][0][0][0][0][0][0][0], wCSTcount=001904294967295088400698183290003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RC1=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183300003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RC2=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183310003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RC3=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183320003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RC4=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183330003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RC5=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183340003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RJC=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183350003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RC7=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183360003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: UTC=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183370003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: RTC=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183380003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: CSM=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183390003BRM0002SP00102022/12/07001220:36 11.9480011INFORMATION0023CBrmCommand::UpdateData0785AC: TSK=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183400003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785AC: CST=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183410003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: RC1=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183420003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: RC2=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183430003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: RC3=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183440003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: RC4=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183450003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: RC5=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295089100698183460003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0792CC: RJC=[59][0][0][0][0][0][0][0][0][1][2][1][13][19][377][54][54][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08914294967295088400698183470003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: RC7=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088400698183480003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0785CC: UTC=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][2][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08844294967295088500698183490003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0786CC: RTC=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][32][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][6]08854294967295087800698183500003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0779IC: RC1=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295087800698183510003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0779IC: RC2=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295087800698183520003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0779IC: RC3=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295087800698183530003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0779IC: RC4=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295087800698183540003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0779IC: RC5=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295087800698183550003BRM0002SP00102022/12/07001220:36 11.9640011INFORMATION0023CBrmCommand::UpdateData0779IC: RJC=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295087800698183560003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0779IC: RC7=[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]08784294967295012200698183570003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0023EX: RC1=[0][0][2][0][0]01224294967295012200698183580003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0023EX: RC2=[0][0][0][0][0]01224294967295012200698183590003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0023EX: RC3=[0][0][2][0][0]01224294967295012900698183600003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0030EX: RC4=[38][0][2][1910][1853]01294294967295012200698183610003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0023EX: RC5=[0][0][0][0][0]01224294967295012400698183620003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0025EX: RJC=[0][0][580][0][0]01244294967295012200698183630003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0023EX: RC7=[0][0][0][0][0]01224294967295013300698183640003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0034RCStatus: 21 21 21 22 60 20 60 60 01334294967295011300698183650003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0014UTCStatus: 01 01134294967295011300698183660003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0014RTCStatus: 01 01134294967295014900698183670003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0023CBrmCommand::UpdateData0050CSTInop:[0][0][0][0][0][0][0][0][0][0][0][0][0][0]01494294967295203800698183680003BRM0002SP00102022/12/07001220:36 11.9790011INFORMATION0024CBrmCommand::DumpPCUInfo1938# PCUInfo
usCount=7
szPositionName:	  RTC	  RJC	  RC1	  RC2	  RC3	  RC4	  DPC	
szUnitID:		RTCST	RJCST	CST_A	CST_B	CST_C	CST_D	CST_F	
szCstType:	00000	00000	10001	10001	10001	10001	00000	
cSerialNum:     	CMBJ200047	CGJX465189	CGJX464260	CGJX465724	CGJX460744	CMBJ200047	
ulCashInCount:	    2	   38	    2	    0	    2	    2	  580	
ulCount:		    2	   38	    0	    0	    0	    0	  580	
ulMaximum:	   80	  210	    0	    0	    0	    0	 1400	
usPStatus:	    0	    0	    4	    4	    4	    3	    0	
bHardwareSensors:	    1	    1	    1	    1	    1	    1	    1	
ulInitialCount:	    0	    0	    0	    0	    0	    0	    0	
ulDispensedCount:	    0	    0	    0	    0	    0	 1910	    0	
ulPresentedCount:	    0	    0	    0	    0	    0	 1853	    0	
ulRetractedCount:	    0	    0	    0	    0	    0	    0	    0	
ulRejectCount:	    0	   38	    0	    0	    0	   38	    0	
ulValues:		    0	    0	   20	   20	   20	   20	    0	
fwType:		    4	    8	    2	    2	    2	    2	    1	
fwItemType:	    1	    1	    4	    4	    4	    4	    3	
ulMinimum:	    0	    0	    0	    0	    0	    0	    0	
usPhysicalIndex:	    7	    8	    0	    1	    2	    3	    5	
bManipulated:	    0	    0	    0	    0	    0	    0	    0	
bINOP:		    0	    0	    0	    0	    0	    0	    0	
bNotConfiged:	    0	    0	    0	    0	    0	    0	    0	
usCuINOP:	    0	    0	    0	    0	    0	    0	    0	
ulInterCashInCount:     0	    0	    0	    0	    0	    0	    0	
bNotUseDipswitch:	    0	    0	    0	    0	    0	    0	    0	
bExchange:	    1	    1	    0	    0	    0	    0	    1	
usNumOfNoteNumber:   18	   18	    3	    3	    3	    3	   18	
NoteNumbers:	[1]0[2]0[3]0[4]0[5]0[6]0[7]0[8]0[9]0[10]0[11]0[12]0[13]0[14]0[15]2[16]0[17]0[0]0	[1]0[2]0[3]0[4]0[5]0[6]0[7]0[8]0[9]0[10]0[11]0[12]0[13]0[14]0[15]32[16]0[17]0[0]6	[5]0[10]0[15]0	[5]0[10]0[15]0	[5]0[10]0[15]0	[5]0[10]0[15]0	[1]59[2]0[3]0[4]0[5]0[6]0[7]0[8]0[9]0[10]1[11]2[12]1[13]13[14]19[15]377[16]54[17]54[0]0	
20384294967295015400698183690003CDM0009FRAMEWORK00102022/12/07001220:36 11.9950011INFORMATION0032CBaseService::CheckStatusChanged0039Device Status Message Report.[Status=0]01544294967295015900698183700003CDM0009FRAMEWORK00102022/12/07001220:36 11.9950011INFORMATION0028CBaseService::BroadcastEvent0048hApp=0x00000000, pCursor->pData->hApp=0x2CE1849801594294967295013600698183710003CDM0009FRAMEWORK00102022/12/07001220:36 11.9950011INFORMATION0028CBaseService::BroadcastEvent0025pData->wClass=3, wClass=001364294967295015900698183720003CDM0009FRAMEWORK00102022/12/07001220:36 11.9950011INFORMATION0028CBaseService::BroadcastEvent0048hApp=0x2CE18498, pCursor->pData->hApp=0x2CE1B02801594294967295012600698183730003CDM0003SPI00102022/12/07001220:36 11.9950011INFORMATION0026CServiceAgent::ReportEvent0023call UnPack(0x1AA45530)01264294967295013700698183740003CDM0009FRAMEWORK00102022/12/07001220:36 11.9950011INFORMATION0028CBaseService::BroadcastEvent0026pData->wClass=13, wClass=001374294967295038400698183750003CDM0003SPI00102022/12/07001220:36 11.9950009XFS_EVENT0015SYSTEM_EVENT[4]0294WFS_SYSTEM_EVENT, 
lpResult =
{
	hWnd = [0x00030048],
	RequestID = [0],
	hService = [25],
	tsTimestamp = [2022/12/07 20:36 11.995],
	hResult = [0],
	u.dwEventID = [4],
	lpBuffer = [0x3133c8bc]
	{
		lpszPhysicalName = NULL,
		lpszWorkstationName = [********],
		dwState = [0]
	}
}03844294967295012600698183760003CIM0003SPI00102022/12/07001220:36 11.9950011INFORMATION0026CServiceAgent::ReportEvent0023call UnPack(0x1AA45580)01264294967295015900698183770003CDM0007ACTIVEX00102022/12/07001220:36 11.9950011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000417, wParam=0x1351EFD8, lParam=0x32CC54D401594294967295038400698183780003CIM0003SPI00102022/12/07001220:36 11.9950009XFS_EVENT0015SYSTEM_EVENT[4]0294WFS_SYSTEM_EVENT, 
lpResult =
{";
         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("54[0]0	\r\n"));
         Assert.IsTrue(logLine.Contains("NoteNumbers:"));
      }


      [TestMethod]
      public void DetectEOLNextLineStartsWithADigit()
      {
         // Test Sample Line
         string sampleFile =
            @"	ulRejectedCount4CIM(0) ulRetractedCount4CIM(0) ulTotalRetractedCount(0)
	ulRejectedCount4CDM(6) ulRetractedCount4CDM(0) ulRCretractcount(0)
22014294967295219700697922010003BRM0002SP00102022/12/07001219:21 23.5510011INFORMATION0026CBrmCommand::DumpTranInfos2095# Last TranInfos
usNumOfTranInfo : 8 
<1>
	ulValue(1) ulRemain(59) ulInitialCount(0)
	ulDispensedCount(0) ulCashInCount(59) ulTotalRejectedCount(0)
	ulRejectedCount4CIM(0) ulRetractedCount4CIM(0) ulTotalRetractedCount(0)
	ulRejectedCount4CDM(0) ulRetractedCount4CDM(0) ulRCretractcount(0)
<2>
	ulValue(2) ulRemain(0) ulInitialCount(0)
	ulDispensedCount(0) ulCashInCount(0) ulTotalRejectedCount(0)
	ulRejectedCount4CIM(0) ulRetractedCount4CIM(0) ulTotalRetractedCount(0)
	ulRejectedCount4CDM(0) ulRetractedCount4CDM(0) ulRCretractcount(0)
<3>";
         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("count(0)\r\n"));
      }


      [TestMethod]
      public void DetectEOLDontStopOnOpenAngleBrackets()
      {
         // Test Sample Line
         string sampleFile =
            @"21984294967295017200697960750003BRM0002SP00102022/12/07001219:28 34.3890011INFORMATION0026CBrmService::after_Execute0070<304> : Change the configuration of cassette from disable to enable(1)01724294967295050200697960760003BRM0002SP00102022/12/07001219:28 34.3890011INFORMATION0028CBrmCommand::DumpCstInopInfo0398# after_Execute : CstInopInfo
ulCstCount : 7 
<1> : <RTC> [0][0][0] (7) - [3][10] => [1][2][3]
<2> : <RJC> [0][0][0] (8) - [3][10] => [4][5][6]
<3> : <RC1> [0][0][0] (0) - [3][10] => [7][8][9]
<4> : <RC2> [0][0][0] (1) - [3][10] => [a][b][c]
<5> : <RC3> [0][0][0] (2) - [3][10] => [d][e][f]
<6> : <RC4> [0][0][0] (3) - [3][10] => [h][i][j]
<7> : <DPC> [0][0][0] (5) - [3][10] => [0][0][0]
05024294967295017100697960770013CashDispenser0009FRAMEWORK00102022/12/07001219:28 34.3890007DEVRETN0021CBaseService::Execute0061HSERVICE[14] COMMAND[304] HRESULT[-14] OUT BUFFER[0x00000000]01714294967295012300697960780006COMMON0009FRAMEWORK00102022/12/07001219:28 34.3890011INFORMATION0015CProcessor::Run0022---- Wait [14776] ----01234294967295030000697960790003CDM0003SPI00102022/12/07001219:28 34.3890009XFS_EVENT0012EXECUTE[304]0213WFS_EXECUTE_COMPLETE, 
lpResult =
{
	hWnd = [0x00030048],
	RequestID = [256108],
	hService = [14],
	tsTimestamp = [2022/12/07 19:28 34.389],
	hResult = [-14],
	u.dwCommandCode = [304],
	lpBuffer = NULL
}030042949672950159";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine(); 
         Assert.IsTrue(logLine.EndsWith("[0][0][0]\r\n"));
      }

      [TestMethod]
      public void DetectEOLRead2Lines()
      {
         // Test Sample Line
         string sampleFile =
            @"04004294967295019800698007020009INDICATOR0007ACTIVEX00102022/12/07001219:30 31.5500006XFSAPI0023CContextMgr::MgrWndProc0093WFS_SERVICE_EVENT(RequestID=0, hService=20, hResult=0, dwCommandCode=801 lpBuffer=0x3133C34C)01984294967295016500698007030009GUIDLIGHT0007ACTIVEX00102022/12/07001219:30 31.5500011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000415, wParam=0x1D27B720, lParam=0x2B6D2E2401654294967295012000698007040006COMMON0003SPI00102022/12/07001219:30 31.5500011INFORMATION0010WFPGetInfo0030HSERVICE=18, SrvcVersion=3(03)01204294967295023900698007050003SIU0003SPI00102022/12/07001219:30 31.5500007XFS_CMD0012GETINFO[801]0154hResult[0] = WFPGetInfo(
	hService = [18],
	dwCategory = [801],
	dwTimeOut = [0],
	hWnd = [0x0002028c],
	ReqID = [256268],
	lpQueryDetails = NULL
)02394294967295020300698007060009GUIDLIGHT0007ACTIVEX00102022/12/07001219:30 31.5510006XFSAPI0022CService::AsyncGetInfo0099WFSAsyncGetInfo(hService=18, dwCategory=801, lpQueryDetails=0x00000000, RequestID=256268) hResult=002034294967295016200698007070006SENSOR0007ACTIVEX00102022/12/07001219:30 31.5510011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000415, wParam=0x1D27B760, lParam=0x3251547401624294967295012000698007080006COMMON0003SPI00102022/12/07001219:30 31.5510011INFORMATION0010WFPGetInfo0030HSERVICE=19, SrvcVersion=3(03)01204294967295023900698007090003SIU0003SPI00102022/12/07001219:30 31.5510007XFS_CMD0012GETINFO[801]0154hResult[0] = WFPGetInfo(
	hService = [19],
	dwCategory = [801],
	dwTimeOut = [0],
	hWnd = [0x0002026a],
	ReqID = [256269],
	lpQueryDetails = NULL
)02394294967295020000698007100006SENSOR0007ACTIVEX00102022/12/07001219:30 31.5510006XFSAPI0022CService::AsyncGetInfo0099WFSAsyncGetInfo(hService=19, dwCategory=801, lpQueryDetails=0x00000000, RequestID=256269) hResult=002004294967295019800698007110009AUXILIARY0007ACTIVEX00102022/12/07001219:30 31.5520006XFSAPI0023CContextMgr::MgrWndProc0093WFS_SERVICE_EVENT(RequestID=0, hService=21, hResult=0, dwCommandCode=801 lpBuffer=0x3133CA3C)01984294967295016500698007120009INDICATOR0007ACTIVEX00102022/12/07001219:30 31.5520011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000415, wParam=0x1D27B640, lParam=0x32CC316401654294967295012000698007130006COMMON0003SPI00102022/12/07001219:30 31.5520011INFORMATION0010WFPGetInfo0030HSERVICE=20, SrvcVersion=3(03)01204294967295023900698007140003SIU0003SPI00102022/12/07001219:30 31.5520007XFS_CMD0012GETINFO[801]0154hResult[0] = WFPGetInfo(
	hService = [20],
	dwCategory = [801],";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith(" NULL\r\n)"));

         logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith(" NULL\r\n)"));
      }

      [TestMethod]
      public void DetectEOLNextCharIsSpace()
      {
         // Test Sample Line
         string sampleFile =
            @"03164294967295011700698019820006KEYMGR0003DLL00102022/12/07001219:31 11.2710006Normal00000042CPinPadCommand::SetDataBuffer2() szErr = .01174294967295009400698019830006KEYMGR0003DLL00102022/12/07001219:31 11.2710006NORMAL00000019OpenFDKDevice Start00944294967295009500698019840006KEYMGR0003DLL00102022/12/07001219:31 11.2710006NORMAL00000020OpenFDKDevice Start200954294967295009500698019850006KEYMGR0003DLL00102022/12/07001219:31 11.2710006NORMAL00000020OpenFDKDevice Start300954294967295011000698019860006KEYMGR0003DLL00102022/12/07001219:31 11.2710006Normal00000035CPinPadCommand::OpenDevice() Start.01104294967295011700698019870006KEYMGR0003DLL00102022/12/07001219:31 11.2710006Normal00000042CFunctionKeyDrv::OpenFuncKeyDevice() Start01174294967295012600698019880003BRM0003VDM00102022/12/07001219:31 11.3650003API0022BRM_ResetOperationMode0035BRM_SetConnectionInfo(0) [result=0]01264294967295012800698019890003BRM0002SP00102022/12/07001219:31 11.3650010NORMAL4VDM0030CSNRMappingTable::EnumRegistry0023dwCount [0] m_table[0] 01284294967295330300698019900003BRM0002SP00102022/12/07001219:31 11.3810010NORMAL4VDM0030CNHBRMProperty::CNHBRMProperty3198### Show Option ### 
 dwTraceLevel(2)
 dwP6Control(0)
 dwMaxAcceptCount(40)
 dwMaxDispenseCount(40)
 dwShutterControl4CDM(1)
 dwShutterControl4CIM(1)
 dwRecycleMode(0)
 dwReportExtraInfo(1)
 dwResetControl(0)
 dwConvPCU2LCU(2000F)
 dwCheckInvalidPosition(0)
 EPDownloadRetryCount(3)
 dwAutoReject(1)
 dwCuMove2RJIfCuEmpty(3)
 dwDaysToLeft(30)
 dwBCDaysToLeft(30)
 dwServiceVersion(320)
 dwHWErrorIfDeviceNotInPosition(2)
 dwMisfeedRetry(1)
 dwNumberOfRetractOperations(1)
 dwCheckInvalideCashUnit(0)
 dwP6Level2StackPosition(2048)
 dwCheckInvalidShutterStatus(0)
 dwDelBinFileWhenDowngrade(1)
 dwCuOKIfMANIP4RTRJ(1)
 dwCashInCloseShutterIfOpened(1)
 dwErrorCodeIfDeviceOnline(0)
 dwRtToRjcIfBinFull(0)
 dwDispenseType(1)
 dwForceRollBackIfPosNotEmpty(1)
 dwStatus4AcceptorDispenser(1)
 dwulRejectCount4RJCU(1)
 dwIgnoreTransaction4Reset(1)
 dwConfigDispense(0)
 dwCuMANIPIfPCUMiss(0)
 dwDispCuStopIfCountZero(0)
 dwClearExtraCountIfCountZero(1)
 dwSeperateDispenseReady(0)
 dwIgnoreCashInActive(1)
 dwA2iARecog(0)
 dwTimeoutForA2iARecog(60000)
 dwStatusPollingTime(50)
 dwIgnoreSkew4CashIn(1)
 dwBetterNoteInfoThanErrRate(1)
 dwAccStopIfTypeAllNotAvail(1)
 dwEnableChangeCashUnitInfo(0)
 dwSerialNumber(0)
 dwRegister4SerialNumber(0)
 dwControlOverlapSerialNumber(1118481)
 dwStackPos4AbnormalSerialNo(0)
 dwNoteSerialImage(0)
 dwSerialNumberDaysToLeft(30)
 dwCloseShutterIfOpened(0)
 dwEnableVDM4Serial(0)
 dwCompoundOptions(0)
 dwEnableSubDispense(0)
 dwSubDispenseItemTakenTime(30000)
 dwSetHighIfNotDetectFullSensor4RT(1)
 dwP6ControlWhenRetract(0)
 dwControl4FailedReadSN(0)
 ReplaceChar4FailedReadSN(*)
 AttemptCount4CSMRT(0)
 EnableSerialImageToJPG(0)
 dwL1NotesPosIfRetract2RC(0)
 dwLow2OkIfBinLow(1)
 dwFullHigh2OkIfBinFullHigh(1)
 dwHandleEpRetractNotes(1)
 dwSleep4CashInIfAutoShutter(1)
 dwAddSerialInfo4INIFile(0)
 dwSaveSerialInfo4INIFile(0)
 dwDisableIdleCheck(3)
 dwSkewDetectionTime(0)
 dwShutterOpenCheck(0)
 dwHWErrorIfCloseFail(0)
 dwCashInCancel(1)
 dwUseSnMdb(0)
 dwDisableCimCstEvent(0)
 dwCashInTooManyItems(0)
 dwDualShutterStatusOpen(0)
 dwDisLowStatus(0)
 dwReverseDotMatrix(0)
 dwSaveFsnFile(0)
 dwFSNDaysToLeft(-1)
 dwChangeAcceptorWhenError(1)
 dwIsWaitForCashTaken(0)
 dwUseRecycleUnitWhenCashIn(1)
 dwDefaultMixAlgorithm(0)
 dwMakePCUStatusFromLCU(1)
 ShutterControl4CIM(CashIn[0], RollBack[0], dwUpdateUnknownNoteToRefused[0], dwPCUMinimum[0])
 dwCstRotation(0)
 dwRjToCashInIfBinFull(0)
 dwUseCstAccounts(0)
 dwUseShutterJammed(0)
 dwMixMode(1)
 dwUseDeviceStatusBusy(0)
 dwCheckHandSensorWhenInsert(0)
 dwAccOKIfRJFull(1)
 dwDisableTERejectButton(0)
 dwNoCstChangedEventWhenTest(0)
 dwCreateCstOptionIfMissing(1)
 dwNotSaveFsnIfError(0)
 dwUseSystemInfo(1)
 dwShutterOpenCheckValue(0)
 dwShutterLockCheckInPresent (1)
 dwSaveP6NoteSerialImage(0)
 dwReportExtraInfoEx(0)
 dwCuLowIfDispensableLow(0)
 dwReportFullHighToOK(1)
 dwClearInopWhenEndExchange(0)
dwCstOperMode(0)
 dwForceWriteCstID(0)
 dwSetCount4DPC(1)
 dwCheckInitCount(1)
dwCheckTEStatusWhenCount(0)
 dwSaveUKNoteImage(0)
 dwShutterCloseIfOutShutterFail(0)
dwEnableRealAcceptCount(0)
33034294967295076600698019910003BRM0002SP00102022/12/07001219:31 11.3810010NORMAL4VDM0030CNHBRMProperty::CNHBRMProperty0661### Directory ### 
ConfigDir(C:\Hyosung\Nextware\Exe) LogDir(C:\Hyosung\Nextware\Trace\EPLOG\BC_REJECT) DispInfoDir(C:\Hyosung\Nextware\Exe\) EPDownloadDir(C:\Hyosung\Nextware\Exe) 
";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("dwEnableRealAcceptCount(0)\r\n"));
      }

      [TestMethod]
      public void DetectEOLTableDataIncludesDash()
      {
         // Test Sample Line
         string sampleFile =
            @"03284294967295011200698021500005CSM500002SP00102022/12/07001219:31 12.2730006NORMAL0021CNHUsb2::ReadPrevData0018Bulk Length: 4409601124294967295013400698021510003SPR0002SP00102022/12/07001219:31 12.2730006Normal0028CNHPTR4SPRDev::CNHPTR4SPRDev0035[NHSpCom] support TraceErrHistory!!01344294967295011200698021520005CSM500002SP00102022/12/07001219:31 12.2730006NORMAL0021CNHUsb2::ReadPrevData0018Data Length: 4403501124294967295011400698021530003SPR0002SP00102022/12/07001219:31 12.2730006NORMAL0025KSPRProperty::ShowOptions0018# DeviceName=LSPR301144294967295014600698021540003SPR0002SP00102022/12/07001219:31 12.2730006NORMAL0025KSPRProperty::ShowOptions0050# DLLName=NHUSBDevCommDLL20.dll, DriverName=nh SPR01464294967295168000698021550003SPR0002SP00102022/12/07001219:31 12.2830006NORMAL0025KSPRProperty::ShowOptions1584# REGISTRY OPTIONS
Name            Value         Function
------------------------------------
TraceLevel      0x00000001
FontFileName    
PrintImageName1 C:\Hyosung\Nextware\Trace\PrinterBack.bmp
PrintImageName2 C:\Hyosung\Nextware\Trace\PrinterBack.bmp
DefaultFont     Lucida Console
EPDirectory     C:\Hyosung\Nextware\EXE
------------------------------------
Initialize      0x00000000
TopMargin       0x00000000
PaperSize       0x00000065
TotalColumn     0x00000028
CutMargin       0x000000a0
LeftMargin      0x00000003
ImageNumber     0x00000001
PrintOption     0x00000000
SelectBackground 0x00000001
LineSpace        0x00000008
EPDownloadOption 0x00000002
DefaultPointSize 0x0000000a
DownloadRetryCount 0x00000001
EPDefaultFontID  99
FontHeight       0x0000001a
------------------------------------
ErrorCode7D      0x00000001
FontDownload     0x00000000
ImageDownloadOn  0x00000000
SelectFont       0x00000000
SetConf          0x00000001
LowSensor        0x00000001
JamSensor        0x00000000
MediaTaken       0x00000001
Unicode          0x00000001
EnLandscape      0x00000000
MBSupport        0x00000000
MultibyteCharSet 0x00000000
EPSupportMultibyte 0x00000001
Text2Image       0x00000001
IsHWErrorWhenPaperOut 0
BufferedPrint    0
BitmapAddSpace    1
BitmapSpaceHeight    10
ExtraFieldUse    1
TecbanConvAscii    0
bIsAsyncEPDownload	0
bDetectPaperAfterAutoload 1
EPLogFilePath C:\Hyosung\Nextware\Trace\EPLOG
EPLogFileBackUpPath C:\Hyosung\Nextware\BACKUPNHY
EPLogDaysToLeft	 30
EPLogDaysToBackup	 5
UseTakenSensor	 0
16804294967295011300698021560003SPR0002SP00102022/12/07001219:31 12.2830006NORMAL0026CNHPTR4SPRDev::FindSPRType0016SPR Type : LSPR301134294967295012400698021570006COMMON0002SP00102022/12/07001219:31 12.2830006NORMAL0010LoadRegDll0040Success to LoadLibrary NHRegUtils.dll!!!01244294967295013700698021580003SPR0002SP00102022/12/07001219:31 12.2830011INFORMATION0046CDeviceControlWrapper::CDeviceControlWrapper()0015UseUSBReset : 101374294967295018000698021590003SPR0002SP00102022/12/07001219:31 12.2830006NORMAL0044CDeviceControlWrapper::CDeviceControlWrapper0065[NHUSBDevComm20.dll][V02.00.04.01][Hyosung USB communication DLL]01804294967295014200698021600003SPR0002SP00102022/12/07001219:31 12.2830011INFORMATION0046CDeviceControlWrapper::CDeviceControlWrapper()0020m_nUSBResetTime : 1001424294967295014200698021610003SPR0002SP00102022/12/07001219:31 12.2830011INFORMATION0046CDeviceControlWrapper::CDeviceControlWrapper()0020m_nUSBResetCount : 301424294967295014800698021620003SPR0002SP00102022/12/07001219:31 12.2930011INFORMATION0046CDeviceControlWrapper::CDeviceControlWrapper()0026m_nEPUsbResetintervalC : 101484294967295014800698021630003SPR0002SP00102022/12/07001219:31 12.2930011INFORMATION0046CDeviceControlWrapper::CDeviceControlWrapper()0026m_nEPUsbResetintervalA : 101484294967295011500698021640003SPR0002SP00102022/12/07001219:31 12.2930006NORMAL0025CNHPTR4SPRDev::DeviceOpen0019DeviceOpen Invoked.01154294967295010700698021650003DLL0006nh SPR00102022/12/07001219:31 12.2930006INFORM0013CUSB::Connect0019m_szDevName[nh SPR]01074294967295019600698021660003DLL0006nh SPR00102022/12/07001219:31 12.2930011INFORMATION0019CUSB::OpenOneDevice0097Attempting to open \\?\usb#vid_1a75&pid_1153#6&9c9e90&0&4#{25d9c40f-65fc-4afc-89dd-7484e99290f2}
0196429496";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("UseTakenSensor	 0\r\n"));
      }

      [TestMethod]
      public void DetectEOLAnotherFormofTable()
      {
         // Test Sample Line
         string sampleFile =
            @"00 00 00 03164294967295013300698042420003SPR0002SP00102022/12/07001219:37 44.1620011INFORMATION0038CDeviceControlWrapper::OnPositiveReply0019OnPositiveReply !!!01334294967295011400698042430003SPR0002SP00102022/12/07001219:37 44.1620006NORMAL0025CNHPTR4SPRDev::DeviceOpen0018[0] = DeviceOpen()01144294967295018100698042440003SPR0002SP00102022/12/07001219:37 52.2720011INFORMATION0035CDeviceControlWrapper::UpdateSensor0070##iCheckLog Start SENSOR_DATA Unit: SPR, Message: C300 iCheckLog End##01814294967295041600698042450003SPR0002SP00102022/12/07001219:37 52.2720011INFORMATION0035CDeviceControlWrapper::UpdateSensor0305## S1 : SENSOR STATUS1
Bit Off/On Function
------------------------------------
0   On     Paper Not End.
1   On     Black Mark.
2   Off     Jam.
3   Off     Cutter.
4   Off     Head Not open.
5   Off     TPH.
6   On     Paper Not Out.
7   On     DIPS/W2.
------------------------------------
04164294967295042200698042460003SPR0002SP00102022/12/07001219:37 52.2720011INFORMATION0035CDeviceControlWrapper::UpdateSensor0311## S2 : SENSOR STATUS2
Bit Off/On Function
------------------------------------";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("------------------------------------\r\n"));
      }

      [TestMethod]
      public void DetectEOLReadMultipleLines()
      {
         // Test Sample Line
         string sampleFile =
            @"	u.dwCommandCode = [407],
	lpBuffer = [0x30fe083c]
}03064294967295020000698133780003PIN0007ACTIVEX00102022/12/07001220:35 12.9560006XFSAPI0023CContextMgr::MgrWndProc0101WFS_EXECUTE_COMPLETE(RequestID=256477, hService=24, hResult=0, dwCommandCode=407 lpBuffer=0x30FE083C)02004294967295015900698133790003PIN0007ACTIVEX00102022/12/07001220:35 12.9560011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000408, wParam=0x00000000, lParam=0x2B6D6DFC01594294967295012200698133800003PIN0007ACTIVEX00102022/12/07001220:35 12.9570005EVENT0027CPINService::HandlePinBlock0020FirePinBlockComplete01224294967295011800698133810009GUIDLIGHT0007ACTIVEX00102022/12/07001220:35 12.9620008PROPERTY0018Ctrl::GetHasPinPad0016HasPinPad[FALSE]01184294967295014000698133820006SENSOR0007ACTIVEX00102022/12/07001220:35 12.9870008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133830006SENSOR0007ACTIVEX00102022/12/07001220:35 12.9880008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133840006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0030008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133850006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0050008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133860006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0150008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133870006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0170008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133880006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0260008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133890006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0260008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133900006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0340008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133910006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0340008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133920006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0450008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133930006SENSOR0007ACTIVEX00102022/12/07001220:35 13.0450008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133940006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1120008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133950006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1120008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133960006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1180008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698133970006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1180008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295011900698133980003IDC0007ACTIVEX00102022/12/07001220:35 13.1480008PROPERTY0020Ctrl::GetMediaStatus0021MediaStatus = PRESENT01194294967295014000698133990006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1530008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134000006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1530008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134010006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1540008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134020006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1550008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134030006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1550008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134040006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1550008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134050006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1730008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134060006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1740008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134070006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1750008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134080006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1750008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295011900698134090003CIM0007ACTIVEX00102022/12/07001220:35 13.1940008PROPERTY0023Ctrl::GetMaxStackerItem0018MaxStackerItem[40]01194294967295014000698134100006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1960008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134110006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1970008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134120006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1980008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295014000698134130006SENSOR0007ACTIVEX00102022/12/07001220:35 13.1980008PROPERTY0028Ctrl::GetEnhancedAudioStatus0031EnhancedAudioStatus[NOTPRESENT]01404294967295013400698134140003IDC0007ACTIVEX00102022/12/07001220:35 13.2750006METHOD0012Ctrl::ChipIO0046Invoked {Protocol[0], Token[SEND], Timeout[0]}01344294967295011500698134150003IDC0007ACTIVEX00102022/12/07001220:35 13.2760011INFORMATION0012Ctrl::ChipIO0022ARRAY TYPE[0x0000200c]01154294967295011800698134160006COMMON0003SPI00102022/12/07001220:35 13.2760011INFORMATION0010WFPExecute0028HSERVICE=27, SrvcVersion=3.001184294967295013700698134170006COMMON0003SPI00102022/12/07001220:35 13.2770011INFORMATION0010WFPExecute0047COMMAND=209, XFS30[30FCCA2C] -> XFS31[30FCCA2C]01374294967295021800698134180006COMMON0009FRAMEWORK00102022/12/07001220:35 13.2770011INFORMATION0033CSpCmdDispatcher::DispatchCommand0099m_pCmdQ->Insert() {HSERVICE[27], HWND[0x00010390], REQUESTID[256478], dwCmdCode[209], dwTimeOut[0]}02184294967295024100698134190003IDC0003SPI00102022/12/07001220:35 13.2770007XFS_CMD0012EXECUTE[209]0156hResult[0] = WFPExecute(
	hService = [27],
	dwCommand = [209],
	dwTimeOut = [0],
	hWnd = [0x00010390],
	ReqID = [256478],
	lpCmdData = [0x30fcca2c]
)02414294967295019200698134200006COMMON0009FRAMEWORK00102022/12/07001220:35 13.2780011INFORMATION0025CCommandQueue::RemoveHead0081return (bResult[1]) pCommand{hService[27],..., ReqID[256478], dwCommandCode[209]}01924294967295018200698134210003IDC0007ACTIVEX00102022/12/07001220:35 13.2780006XFSAPI0017CService::Execute0089WFSAsyncExecute(hService=27, dwCommand=209, lpCmdData=0x30FCCA2C, ReqID=256478) hResult=001824294967295012200698134220006COMMON0009FRAMEWORK00102022/12/07001220:35 13.2780011INFORMATION0015CProcessor::Run0021Execute{hService[27]}01224294967295016400698134230006COMMON0009FRAMEWORK00102022/12/07001220:35 13.2790011INFORMATION0028CServiceProvider::GetService0050service OK {HSERVICE[27], LogicalName[CardReader]}01644294967295015400698134240010CardReader0009FRAMEWORK00102022/12/07001220:35 13.2790007DEVCALL0021CBaseService::Execute0047HSERVICE[27] COMMAND[209] IN BUFFER[0x0067B0E4]01544294967295010700698134250003IDC0009FRAMEWORK00102022/12/07001220:35 13.2790007DEVCALL0019CIdcService::ChipIO0009GetStatus01074294967295011100698134260003IDC0009FRAMEWORK00102022/12/07001220:35 13.2790007DEVCALL0019CIdcService::ChipIO0013ProcessChipIO01114294967295010900698134270003IDC0002SP00102022/12/07001220:35 13.2790006Normal0033CNHDIP4SANDIPDev::ProcessChipIO()0005Start01094294967295014400698134280003IDC0002SP00102022/12/07001220:35 13.2880006Normal0033CNHDIP4SANDIPDev::ProcessChipIO()0040ChipProtocol = (HEX)1, ChipInLength = 4901444294967295016200698134290003IDC0002SP00102022/12/07001220:35 13.2890006NORMAL0039CSankyoUSBDLLWrapper::EncICCardTransmit0052EncICCardTransmit(lpszSerialNumber=E1070209) Invoked01624294967295012100698134300003IDC0002SP00102022/12/07001220:35 13.4080006Normal0033CNHDIP4SANDIPDev::ProcessChipIO()0017Chip IO data sent01214294967295014500698134310003IDC0002SP00102022/12/07001220:35 13.4100006Normal0033CNHDIP4SANDIPDev::ProcessChipIO()0041ChipProtocol = (HEX)1, ChipOutLength = 4501454294967295010800698134320003IDC0002SP00102022/12/07001220:35 13.4110006Normal0033CNHDIP4SANDIPDev::ProcessChipIO()0004End 01084294967295016600698134330010CardReader0009FRAMEWORK00102022/12/07001220:35 13.4120007DEVRETN0021CBaseService::Execute0059HSERVICE[27] COMMAND[209] HRESULT[0] OUT BUFFER[0x0067AFC4]01664294967295012300698134340006COMMON0009FRAMEWORK00102022/12/07001220:35 13.4130011INFORMATION0015CProcessor::Run0022---- Wait [14880] ----01234294967295030600698134350003IDC0003SPI00102022/12/07001220:35 13.4130009XFS_EVENT0012EXECUTE[209]0219WFS_EXECUTE_COMPLETE, 
lpResult =
{
	hWnd = [0x00010390],
	RequestID = [256478],
	hService = [27],
	tsTimestamp = [2022/12/07 20:35 13.412],
	hResult = [0],
	u.dwCommandCode = [209],
	lpBuffer = [0x30fcca2c]
}03064294967295020000698134360003IDC0007ACTIVEX00102022/12/07001220:35 13.4250006XFSAPI0023CContextMgr::MgrWndProc0101WFS_EXECUTE_COMPLETE(RequestID=256478, hService=27, hResult=0, dwCommandCode=209 lpBuffer=0x30FCCA2C)02004294967295015900698134370003IDC0007ACTIVEX00102022/12/07001220:35 13.4260011INFORMATION0022CMsgWnd::DefWindowProc0056message=0x00000408, wParam=0x00000000, lParam=0x32515CE401594294967295012000698134380006COMMON0003SPI00102022/12/07001220:35 13.4270011INFORMATION0010WFPGetInfo0030HSERVICE=27, SrvcVersion=3(03)01204294967295024400698134390003IDC0003SPI00102022/12/07001220:35 13.4270007XFS_CMD0012GETINFO[201]0159hResult[0] = WFPGetInfo(
	hService = [27],
	dwCategory = [201],
	dwTimeOut = [300000],
	hWnd = [0x00010390],
	ReqID = [256479],
	lpQueryDetails = NULL
)02444294967295022500698134400006COMMON0009FRAMEWORK00102022/12/07001220:35 13.4270011INFORMATION0033CSpCmdDispatcher::DispatchCommand0106pService->GetInfo() {HSERVICE[27], HWND[0x00010390], REQUESTID[256479], dwCmdCode[201], dwTimeOut[300000]}02254294967295019200698134410003IDC0007ACTIVEX00102022/12/07001220:35 13.4280006XFSAPI0017CService::GetInfo0099WFSAsyncGetInfo(hService=27, dwCategory=201, lpQueryDetails=0x00000000, RequestID=256479) hResult=001924294967295016400698134420006COMMON0009FRAMEWORK00102022/12/07001220:35 13.4280011INFORMATION0028CServiceProvider::GetService0050service OK {HSERVICE[27], LogicalName[CardReader]}01644294967295016800698134430003IDC0009FRAMEWORK00102022/12/07001220:35 13.4280011INFORMATION0021CBaseService::GetInfo0064Srvc=201 ReqID=256479 Wnd=0x00010390 Cmd=201 TimeOut=300000 IO=101684294967295015500698134440010CardReader0009FRAMEWORK00102022/12/07001220:35 13.4290007DEVCALL0021CBaseService::GetInfo0048HSERVICE[27] CATEGORY[201] IN BUFFER[0x00000000]01554294967295010700698134450003IDC0009FRAMEWORK00102022/12/07001220:35 13.4290007DEVCALL0019CIdcService::Status0009GetStatus01074294967295016800698134460010CardReader0009FRAMEWORK00102022/12/07001220:35 13.4290007DEVRETN0021CBaseService::GetInfo0061HSERVICE[27] CATEGORY[201] HRESULT[0], OUT BUFFER[0x006943E4]01684294967295128500698134470003IDC0003SPI00102022/12/07001220:35 13.4300009XFS_EVENT0012GETINFO[201]1198WFS_GETINFO_COMPLETE, 
lpResult =
{
	hWnd = [0x00010390],
	RequestID = [256479],
	hService = [27],
	tsTimestamp = [2022/12/07 20:35 13.430],
	hResult = [0],
	u.dwCommandCode = [201],
	lpBuffer = [0x31212c8c]";

         StreamReader testStream = new StreamReader(new MemoryStream(Encoding.UTF8.GetBytes(sampleFile)));

         // Test TraceFileReader can detect end of line
         TraceFileReader reader = new TraceFileReader(testStream);
         string logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("[0x30fe083c]\r\n}"));

         logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("[0x30fcca2c]\r\n)"));

         logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("[0x30fcca2c]\r\n}"));

         logLine = reader.ReadLine();
         Assert.IsTrue(logLine.EndsWith("lpQueryDetails = NULL\r\n)"));
      }
   }
}
